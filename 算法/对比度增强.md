# 对比度增强

1. 直方图均衡

通过一个函数变换，使得像素的概率密度在想要的区间是均匀分布的，实际上使得图像对应的熵变得最大，也就是信息最多。变换后的变量不是原来的像素值而是累计概率密度分布\(CDF\):  
考虑灰度范围在$$0 \sim 1$$之间，此时图像的归一化直方图就是概率密度分布\(PDF\)：  
  $$p(x), 0\le x \le 1$$  
满足：  
  $$\int_{x=0}^{1} p(x) dx = 1$$  
设转换前图像的概率密度函数为$$p_r(r)$$，转换后的概率密度函数是$$p_s(s)$$。转换的映射关系是s=f\(r\)。由概率论的知识可以得到：  
  $$p_s(s) = p_r(r) \frac{dr}{ds}$$  
如果我们想转换后的像素值分布均匀，也就是:  
  $$p_s(s) = 1, 0 \le s \le 1$$  
$$p_s(s)=1$$代入$$p_r(r)$$,可以得到：  
  $$p_r(r) = \frac{ds}{dr}$$  
因此可以得到：  
  $$ s = f(r) = \int_{x=0}^{r} p_r(u)du$$  
上式被称为图像的累计分布函数\(CDF\)。 
下图就是转换前后的图像概率分布：  
![](/assets/histgram1.png)

